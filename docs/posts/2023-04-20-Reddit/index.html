<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-04-23">
<meta name="description" content="Identifying underlying themes in Reddit titles using non-supervised clustering">

<title>Sandro Luis R. Silva - Unraveling Subreddits</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/profile.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-9FYFKWYLVG"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-9FYFKWYLVG', { 'anonymize_ip': true});
</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta name="twitter:title" content="Sandro Luis R. Silva - Unraveling Subreddits">
<meta name="twitter:description" content="Identifying underlying themes in Reddit titles using non-supervised clustering">
<meta name="twitter:image" content="thumbnail.jpeg">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Sandro Luis R. Silva</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html" rel="" target="">
 <span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resume.html" rel="" target="">
 <span class="menu-text">Resume</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Unraveling Subreddits</h1>
                  <div>
        <div class="description">
          Identifying underlying themes in Reddit titles using non-supervised clustering
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">python</div>
                <div class="quarto-category">EDA</div>
                <div class="quarto-category">SQL</div>
                <div class="quarto-category">analysis</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">April 23, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">




<p><img src="thumbnail.jpeg" class="img-fluid"></p>
<h1>
Executive Summary
</h1>
<div class="executive-summary">
<p>Original creation and submission for this notebook was last June 2019.</p>
<p><a href="https://www.reddit.com/">Reddit</a> is an American discussion and aggregation website for user-generated content with more than 500 million monthly visitors. We uncovered the underlying categories or “subreddits” by performing representative-based clustering on a sample of Reddit titles. Results reveal that Reddit is a very American-centric platform and that the two main themes are (a) U.S. politics, and (b) seeking help from other Redditors on a wide range of topics including technology, food, and legal matters. For a small number of clusters (<span class="math inline">\(n=10\)</span>), the high-level categories that emerged include the 2016 U.S. Presidential Elections (Donald Trump, Hillary Clinton, and Bernie Sanders), food, legal concerns, and “New year”-related subreddits. Increasing the number of clusters to <span class="math inline">\(n=16\)</span> revealed more specific subreddits such as technical support, recipes, apartment/rental concerns, and reaction compilations.</p>
</div>
<h2 class="anchored">
Acknowledgements
</h2>
<p>This analysis was done together with my Lab partner, George Esleta, and Cohortmates - Gilbert Chua, Nigel Silva and Oonre Advincula-Go.</p>
<h2 class="anchored">
A. Introduction and the Problem Statement
</h2>
<p><a href="https://www.reddit.com/">Reddit</a> is a discussion and content aggregation website. As of June 2019, it is ranked as the #5 most visited website in the United States and #15 worldwide. Registered members, also called “Redditors”, upload user-generated content (UGC) which are either voted up or voted down by other Redditors. Reddit posts are grouped into user-created boards or communities called “subreddits”, with each subreddit having a specific topic such as food, entertainment, and politics.</p>
<h2 class="anchored">
B. Methodology
</h2>
<p>Reddit titles and authors were scraped from the <a href="https://www.reddit.com/">Reddit</a> website and stored in a text file. The file is tab-delimited and has two columns: author and title. Flow of this notebook is as follows:</p>
<ol>
<li>
Pre-requisites: Load Requirement Package
</li><li>
Reading the Reddit data
</li><li>
Initial data cleaning
</li><li>
Exploratory data analysis
</li><li>
Vectorization (bag-of-words representation) using TFIDF Vectorizer
</li><li>
Dimensionality reduction using Latent Semantic Analysis (LSA)
</li><li>
Representative-based clustering using <em>k</em>-means
</li></ol>
<h3 class="anchored">
Pre-requisites: Load Requirement Package
</h3>
<p>Before anything else, let us first load all important modules for this exercise.</p>
<div class="cell" data-execution_count="1">
<details>
<summary>Loading required modules</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># These are standard imports</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> collections <span class="im">import</span> Counter</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> IPython.display <span class="im">import</span> display_html</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> wordcloud <span class="im">import</span> WordCloud, STOPWORDS</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> StandardScaler</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.feature_extraction.text <span class="im">import</span> TfidfVectorizer</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.feature_extraction <span class="im">import</span> stop_words</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.manifold <span class="im">import</span> TSNE</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.decomposition <span class="im">import</span> TruncatedSVD</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> calinski_harabaz_score, silhouette_score</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.cluster <span class="im">import</span> KMeans</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.pipeline <span class="im">import</span> make_pipeline</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> Normalizer</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    <span class="im">from</span> sklearn.metrics <span class="im">import</span> confusion_matrix</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> nltk</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.tokenize <span class="im">import</span> sent_tokenize, word_tokenize</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.stem.porter <span class="im">import</span> PorterStemmer</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.corpus <span class="im">import</span> stopwords</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk <span class="im">import</span> FreqDist, RegexpTokenizer</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> IPython.display <span class="im">import</span> HTML</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.spatial.distance <span class="im">import</span> euclidean</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.cluster.hierarchy <span class="im">import</span> linkage, dendrogram</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.spatial.distance <span class="im">import</span> euclidean, cityblock</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> urllib</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pprint</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> PIL <span class="im">import</span> Image</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>pp <span class="op">=</span> pprint.PrettyPrinter(indent<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>HTML(<span class="st">'''&lt;script&gt;</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="st">code_show=true; </span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a><span class="st">function code_toggle() {</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="st"> if (code_show){</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="st"> $('div.input').hide();</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="st"> } else {</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a><span class="st"> $('div.input').show();</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="st"> }</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a><span class="st"> code_show = !code_show</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="st">} </span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="st">$( document ).ready(code_toggle);</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/script&gt;</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;form action="javascript:code_toggle()"&gt;&lt;input type="submit" value="Click here to toggle on/off the raw code."&gt;&lt;/form&gt;'''</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<h3 class="anchored">
Reading the Reddit data
</h3>
<p>The data was stored in the ACCESS lab cloud computer (JOJIE). So for this instance, the sample Reddit text file was read using the <code>read_csv</code> function of <code>pandas</code>. In reading the file, tab (<code>\t</code>) separator was used, and the first line was skipped.</p>
<div class="cell" data-execution_count="2">
<details>
<summary>Load Reddit data</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">'reddit-dmw-sample.txt'</span>, sep<span class="op">=</span><span class="st">'</span><span class="ch">\t</span><span class="st">'</span>, skiprows<span class="op">=</span><span class="dv">1</span>, header<span class="op">=</span><span class="va">None</span>, </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>                 usecols <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>], </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>                 names <span class="op">=</span> [<span class="st">'author'</span>, <span class="st">'title'</span>],)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The resulting dataframe has two columns: <code>author</code> and <code>title</code>. A sample of the Reddit topics are shown below.</p>
<table class="table">
<caption>Tale 1: Sample Reddits from the Data</caption>
<thead>
<tr class="header">
<th>author</th>
<th>title</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>PrimotechInc</td>
<td>7 Interesting Hidden Features of apple ios9</td>
</tr>
<tr class="even">
<td>xvagabondx</td>
<td>Need an advice on gaming laptop</td>
</tr>
<tr class="odd">
<td>nkindustries</td>
<td>Semi automatic ROPP Capping machine / ROPP Cap…</td>
</tr>
<tr class="even">
<td>Philo1927</td>
<td>Microsoft Plumbs Ocean’s Depths to Test Underw…</td>
</tr>
<tr class="odd">
<td>tuyetnt171</td>
<td>OPPO F1 chính hãng - Fptshop.com.vn</td>
</tr>
</tbody>
</table>
<h3 class="anchored">
Initial data cleaning
</h3>
<p>Once the Reddit data is stored in a dataframe, initial data cleaning was performed by converting all titles to lowercase, and removing leading and trailing spaces. Duplicate titles were also dropped.</p>
<p>The unique titles are then stored in a list:</p>
<div class="cell" data-execution_count="3">
<details>
<summary>Viewing the unique titles</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'title'</span>] <span class="op">=</span> df[<span class="st">'title'</span>].<span class="bu">str</span>.lower()</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'title'</span>] <span class="op">=</span> df[<span class="st">'title'</span>].<span class="bu">str</span>.strip()</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>docs <span class="op">=</span> <span class="bu">list</span>(df.title.unique())</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>pp.pprint(<span class="st">'Number of titles: '</span> <span class="op">+</span> <span class="bu">str</span>(<span class="bu">len</span>(docs)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<pre><code>'Number of titles: 5848'</code></pre>
<p>After removing duplicates, there are 5848 unique Reddit titles in the sample dataset.</p>
<p>Sample cleaned topics are shown below. Note that there still are punctuation marks and special characters. These will be removed during vectorization.</p>
<pre><code>[   '7 interesting hidden features of apple ios9',
    'need an advice on gaming laptop',
    'semi automatic ropp capping machine / ropp cap sealing machine',
    'microsoft plumbs ocean’s depths to test underwater data center',
    'oppo f1 chính hãng - fptshop.com.vn',
    'stewed ramps w/ fixings in helvatia, wv',
    '(california) is it a crime when a religious figure/ lecturer has '
    'relations with one of his followers',
    'being accused of public indecency, among other things. this is a '
    'misunderstanding because i had health issues. [kansas, usa]',
    '[us-ca/nv] my parents have been separated for almost 20 years, my mom '
    'found out my dad divorced her without her knowledge a few years ago when '
    'i was about 14--can she claim backdated child support?',
    'skyrim ps4?']</code></pre>
<h3 class="anchored">
Exploratory Data Analysis
</h3>
<p>Shown below are the top 15 most used words in the Reddit sample data. Note that the most common word is “TIL” (Today I Learned), followed by the names of prominent US politicians such as US President Donald Trump, 2016 presidential candidate Hillary Clinton, and Senator Bernie Sanders. All three of them figured prominently in the 2016 U.S. presidential elections, with Trump as the presidential nominee under the Republican party, while Clinton and Sanders as the Democratic party presidential candidates. Initial analysis of the data reveal that the <strong>2016 U.S. Presidential Election is one of the primary themes in the sample Reddit data</strong>.</p>
<div class="cell" data-execution_count="4">
<details>
<summary>Viewing the unique titles</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>mask <span class="op">=</span> np.array(Image.<span class="bu">open</span>(<span class="st">'Icon-Reddit1.png'</span>))</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>tokenizer <span class="op">=</span> RegexpTokenizer(<span class="vs">r'\w{2,}'</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>word_tokens <span class="op">=</span> tokenizer.tokenize(<span class="st">' '</span>.join(docs))</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>stopword <span class="op">=</span> <span class="bu">set</span>(stopwords.words(<span class="st">'english'</span>) <span class="op">+</span> <span class="bu">list</span>(stop_words.ENGLISH_STOP_WORDS))</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>docs_filtered <span class="op">=</span> [w <span class="cf">for</span> w <span class="kw">in</span> word_tokens <span class="cf">if</span> <span class="kw">not</span> w <span class="kw">in</span> stopword] </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> FreqDist(docs_filtered)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>labels, values <span class="op">=</span> <span class="bu">zip</span>(<span class="op">*</span>counts.items())</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>indSort <span class="op">=</span> np.argsort(values)[::]</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> np.array(labels)[indSort[<span class="op">-</span><span class="dv">15</span>:]]</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>values <span class="op">=</span> np.array(values)[indSort[<span class="op">-</span><span class="dv">15</span>:]]</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>indexes <span class="op">=</span> np.arange(<span class="bu">len</span>(labels))</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>bar_width <span class="op">=</span> <span class="fl">0.35</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, dpi<span class="op">=</span><span class="dv">100</span>, figsize <span class="op">=</span> (<span class="dv">10</span>,<span class="dv">4</span>))</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].barh(indexes, values, color<span class="op">=</span><span class="st">'#ff4500'</span>)</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_xlabel(<span class="st">'Word count'</span>)</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_title(<span class="st">'Most common words in the Reddit sample data'</span>)</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_yticks(indexes <span class="op">+</span> bar_width)<span class="op">;</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_yticklabels(labels)<span class="op">;</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>wordcloud <span class="op">=</span> WordCloud(background_color<span class="op">=</span><span class="st">"white"</span>, max_words<span class="op">=</span><span class="dv">100</span>, min_font_size<span class="op">=</span><span class="dv">8</span>, mask<span class="op">=</span>mask, </span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>                      prefer_horizontal<span class="op">=</span><span class="fl">0.6</span>, colormap<span class="op">=</span><span class="st">'copper'</span>, relative_scaling<span class="op">=</span><span class="fl">.5</span>).generate(<span class="st">' '</span>.join(docs_filtered))</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].imshow(wordcloud, interpolation<span class="op">=</span><span class="st">'bilinear'</span>)</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].axis(<span class="st">'off'</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="image-outputs/1-TILoutput.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">FIGURE 1: (1) Frequency distribution of the top 15 words in the Reddit sample data, and (b) the corresponding wordcloud. Top words include TIL (Today I learned) and the names of 2016 US Presidential Aspirants (Donald Trump, Bernie Sanders, Hillary Clinton)</figcaption><p></p>
</figure>
</div>
<h3 class="anchored">
Vectorization/Bag-of-words representation
</h3>
<p>To uncover the other underlying themes apart from the 2016 U.S. Presidential Election, unsupervised clustering via k-means is performed on the collection of Reddit titles. To do this, the topics need to be <em>vectorized</em> or be converted to their bag-of-words representation. The <code>TfidfVectorizer</code> vectorizer was used to perform the vectorization.</p>
<p>The <code>TFidfVectorizer</code> also performs further cleaning of the data by removing both frequent words and rare words. <em>Stopwords</em>, or words that appear too frequently in the English language (e.g., the, a, an, and, or), were dropped from the corpus. Reddit-specific stopwords, or words that appear in more than 70% of the titles, were also ignored by setting the <code>max_df</code> parameter of <code>TFidfVectorizer</code> to <span class="math inline">\(0.7\)</span>.</p>
<p>Rare words, or words that appeared in less than 0.1% of the Reddit titles, were also excluded from the corpus. This was implemented by setting the <code>min_df</code> parameter of the <code>TFidfVectorizer</code> to <span class="math inline">\(0.001\)</span>.</p>
<p><em>n</em>-grams of word lengths between <span class="math inline">\(n=1\)</span> and <span class="math inline">\(n=3\)</span> were extracted as part of the vocabulary. This range of n-grams was chosen in order to preserve the context of certain phrases such as “Hillary Clinton” (<span class="math inline">\(n=2\)</span>), “Donald Trump” (<span class="math inline">\(n=2\)</span>), and “Happy new year” (<span class="math inline">\(n=3\)</span>)</p>
<div class="cell" data-execution_count="5">
<details>
<summary>Using a TFIDF Vectorizer</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a TF-IDF Vectorizer</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>tfidf_vectorizer <span class="op">=</span> TfidfVectorizer(token_pattern<span class="op">=</span><span class="vs">r'(?u)\b\w(?:\w|\-)+\b'</span>, </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                                   stop_words<span class="op">=</span>stopword, </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>                                   ngram_range<span class="op">=</span>(<span class="dv">1</span>,<span class="dv">3</span>), min_df<span class="op">=</span><span class="fl">0.001</span>, max_df<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a Bag-Of-Words</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>bow <span class="op">=</span> tfidf_vectorizer.fit_transform(docs)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Identifying the vocabulary</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>vocabulary <span class="op">=</span> tfidf_vectorizer.get_feature_names()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>After vectorization, the sample of Reddit titles has <strong>1,655 unique items</strong> in its vocabulary:</p>
<p>Sample vocabulary items are shown below:</p>
<pre><code>[   'years old',
    'yesterday',
    'york',
    'york times',
    'young',
    'youtube',
    'zealand',
    'zelda',
    'ăn',
    'طريقة']</code></pre>
<h3 class="anchored">
Dimensionality reduction using Latent Semantics Analysis (LSA)
</h3>
<p>The resulting bag of words is a 5848 by 1655 matrix:</p>
<pre><code>print("\t Dimensions: ", bow.shape)
Dimensions:  (5848, 1655)</code></pre>
<p>It would be computationally expensive to perform clustering on a dataset this large. To minimize computational power, dimensionality reduction was performed on the vectorized data via <strong>latent semantic analysis (LSA)</strong>. This was implemented using the <code>TruncatedSVD</code> class of <code>sklearn</code>.</p>
<p>As a general rule for LSA, fewer dimensions allow for broader comparisons of the themes contained in a collection of text, while a higher number of dimensions enable more specific comparisons of themes. A dimesionality between 50 and 1,000 are suitable depending on the size and nature of the document collection, with <span class="math inline">\(300 \pm 50\)</span> the optimum value. Unlike in other dimensionality reduction techniques such as principal component analysis (PCA), checking the proportion of variance retained to determine the optimal dimensionality is <strong>NOT</strong> applicable to LSA.</p>
<p>In this study, <span class="math inline">\(n_{components} = 100\)</span> is used to extract the underlying themes.</p>
<h4 class="anchored">
Reduced dimensionality
</h4>
<p>For the purposes of this study, we reduced the dimensionality of the Reddit sample data to <strong>100 components</strong>. The transformed Reddit dataset is shown below. Numerous subclusters are revealed, confirming that there are multiple categories or themes in the dataset.</p>
<div class="cell" data-execution_count="6">
<details>
<summary>Using a TruncatedSVD to reduce the number of components to 100 components, then getting bag of words, the using TSNE</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>tsvd1 <span class="op">=</span> TruncatedSVD(n_components<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>normalizer <span class="op">=</span> Normalizer(copy<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>lsa1 <span class="op">=</span> make_pipeline(tsvd1, normalizer)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Getting the bag of words</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>bow_tsvd1 <span class="op">=</span> lsa1.fit_transform(bow)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Applying a TSNE model</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>tsne <span class="op">=</span> TSNE(n_components<span class="op">=</span><span class="dv">2</span>, random_state<span class="op">=</span><span class="dv">1704</span>, n_iter<span class="op">=</span><span class="dv">1500</span>, n_iter_without_progress<span class="op">=</span><span class="dv">500</span>, perplexity<span class="op">=</span><span class="dv">50</span>, learning_rate<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>bow_tsne1 <span class="op">=</span> tsne.fit_transform(bow_tsvd1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now, let’s make a graph on the TSNE model’s bag of words. Below you’ll see it flatted TSNE of the bag of words.</p>
<div class="cell" data-execution_count="7">
<details>
<summary>Creating the plot of the TSNE.</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(dpi <span class="op">=</span> <span class="dv">100</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>ax.scatter(bow_tsne1[:,<span class="dv">0</span>], bow_tsne1[:,<span class="dv">1</span>], alpha<span class="op">=</span><span class="fl">0.5</span>, label<span class="op">=</span><span class="va">True</span>, marker<span class="op">=</span><span class="st">'o'</span>, s<span class="op">=</span><span class="dv">8</span>, c<span class="op">=</span><span class="st">"#ff4500"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="image-outputs/2-TSNE.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">FIGURE 2: Reddit topics visualized in two dimensions using TSNE.</figcaption><p></p>
</figure>
</div>
<h3 class="anchored">
Representative-based clustering using <em>k</em>-means
</h3>
<h4 class="anchored">
<ol type="1">
<li>Selecting the optimal number of clusters <code>k</code>
</li></ol></h4>

<p>To determine the optimal number of clusters, we perform k-means clustering for different values of the cluster count <span class="math inline">\(k\)</span> from <span class="math inline">\(k=2\)</span> to <span class="math inline">\(k=20\)</span>. This range of values was chosen to keep the clustering parsimonious.</p>
<p>Several internal validation measures were computed for each value of <span class="math inline">\(k\)</span>. The internal validation measures that were used are (a) intracluster to intercluster distance ratio, (b) Calinski-Harabasz score (c) Silhouette coefficient, and (d) sum of square distances to centroids coefficient.</p>
<p>The optimal value of <span class="math inline">\(k\)</span> is then chosen based on the following criteria:</p>
<ol type="1">
<li>Sum-of-square distance to centroid is minimized</li>
<li>Calinski-Harabasz index is maximized</li>
<li>Intracluster to intercluster distance ratio is minimized</li>
<li>Silhouette coefficient is maximized</li>
</ol>
<p>Plotted below are the values of the internal validation criteria for values of <span class="math inline">\(k\)</span> between 2 and 20. <strong><span class="math inline">\(k = 10\)</span></strong> and <strong><span class="math inline">\(k = 16\)</span></strong> are good candidates for the number of clusters because for these values, the intracluster to intercluster distance ratio has a local minima, and the silhouette coefficient has a relatively high value.</p>
<div class="cell" data-execution_count="8">
<details>
<summary>Function for computing intracluster to intercluster distance ratio</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> intra_to_inter(X, y, dist, r):</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Compute intracluster to intercluster distance ratio</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">    X : array</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co">        Design matrix with each row corresponding to a point</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co">    y : array</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co">        Class label of each point</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co">    dist : callable</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co">        Distance between two points. It should accept two arrays, each </span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co">        corresponding to the coordinates of each point</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co">    r : integer</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="co">        Number of pairs to sample</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="co">    ratio : float</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a><span class="co">        Intracluster to intercluster distance ratio</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    P <span class="op">=</span> []</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    Q <span class="op">=</span> []</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>    p<span class="op">=</span><span class="dv">0</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    q<span class="op">=</span><span class="dv">0</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    np.random.seed(<span class="dv">11</span>)</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>    d <span class="op">=</span> np.random.choice(<span class="bu">range</span>(<span class="dv">0</span>,<span class="bu">len</span>(X)), (r,<span class="dv">2</span>), replace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> a <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="bu">len</span>(d)):</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>  d[a][<span class="dv">0</span>] <span class="op">==</span> d[a][<span class="dv">1</span>]:</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> y[d[a][<span class="dv">0</span>]] <span class="op">==</span> y[d[a][<span class="dv">1</span>]]:</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>            P.append(dist(X[d[a][<span class="dv">0</span>]],X[d[a][<span class="dv">1</span>]]))</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>            p<span class="op">+=</span><span class="dv">1</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>            Q.append(dist(X[d[a][<span class="dv">0</span>]],X[d[a][<span class="dv">1</span>]]))</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>            q<span class="op">+=</span><span class="dv">1</span></span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(P) <span class="op">==</span> <span class="dv">0</span> <span class="kw">or</span> <span class="bu">len</span>(Q) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>        ratio <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>        ratio <span class="op">=</span> (np.<span class="bu">sum</span>(P)<span class="op">/</span><span class="bu">len</span>(P))<span class="op">/</span>(np.<span class="bu">sum</span>(Q)<span class="op">/</span><span class="bu">len</span>(Q))</span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ratio</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution_count="9">
<details>
<summary>Function to create the clusters, cluster labels (and scores of internal validation values)</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cluster_range(X, clusterer, k_start<span class="op">=</span><span class="dv">2</span>, k_stop<span class="op">=</span><span class="dv">16</span>, actual<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Accepts the design matrix, the clustering object, the initial and final </span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">    values to step through, and, optionally, actual labels. It should return a</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">    dictionary of the cluster labels, internal validation values and, if</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co">    actual labels is given, external validation values, for every k.</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="co">    X : design matrix</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co">    clusterer : clustering object</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="co">    k_start : initial value of clusters</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co">    k_stop : final value of clusters</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="co">    actual : actual labels</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="co">    dictionary</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>    validation_dict <span class="op">=</span> {<span class="st">"chs"</span>: [],</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>                       <span class="st">"iidrs"</span>: [],</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>                       <span class="st">"inertias"</span>: [],</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>                       <span class="st">"scs"</span>: [],</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>                       <span class="st">"ys"</span>: []</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>                       }</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> actual <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>        validation_dict <span class="op">=</span> {<span class="st">"chs"</span>: [],</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"iidrs"</span>: [],</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"inertias"</span>: [],</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"scs"</span>: [],</span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"ys"</span>: [],</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"amis"</span>: [],</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"ars"</span>: [],</span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"ps"</span>: []</span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>                           }</span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> k <span class="kw">in</span> <span class="bu">range</span>(k_start, k_stop<span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>        clusterer.n_clusters <span class="op">=</span> k</span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>        np.random.seed(<span class="dv">11</span>)</span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>        y_predict <span class="op">=</span> clusterer.fit_predict(X)</span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a>        validation_dict[<span class="st">"chs"</span>].append(calinski_harabaz_score(X, y_predict))</span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>        validation_dict[<span class="st">"iidrs"</span>].append(</span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>            intra_to_inter(X, y_predict, euclidean, <span class="dv">50</span>))</span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a>        validation_dict[<span class="st">"inertias"</span>].append(clusterer.inertia_)</span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a>        validation_dict[<span class="st">"scs"</span>].append(silhouette_score(X, y_predict))</span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a>        validation_dict[<span class="st">"ys"</span>].append(y_predict)</span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> actual <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb13-49"><a href="#cb13-49" aria-hidden="true" tabindex="-1"></a>            validation_dict[<span class="st">"amis"</span>].append(</span>
<span id="cb13-50"><a href="#cb13-50" aria-hidden="true" tabindex="-1"></a>                adjusted_mutual_info_score(actual, y_predict))</span>
<span id="cb13-51"><a href="#cb13-51" aria-hidden="true" tabindex="-1"></a>            validation_dict[<span class="st">"ars"</span>].append(</span>
<span id="cb13-52"><a href="#cb13-52" aria-hidden="true" tabindex="-1"></a>                adjusted_rand_score(actual, y_predict))</span>
<span id="cb13-53"><a href="#cb13-53" aria-hidden="true" tabindex="-1"></a>            validation_dict[<span class="st">"ps"</span>].append(purity(actual, y_predict))</span>
<span id="cb13-54"><a href="#cb13-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> validation_dict</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<pre><code>kmeans_dict1 = cluster_range(
    # bag of words results
    bow_tsvd1, 
    # using a k-means clusterer
    KMeans(random_state=1704, n_init=20, max_iter=1000, tol=1e-6), 
    2,
    20)</code></pre>
<div class="cell" data-execution_count="10">
<details>
<summary>Function to plot internal validation values</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_internal(inertias, chs, iidrs, scs):</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Plot internal validation values</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>,<span class="dv">4</span>,dpi<span class="op">=</span><span class="dv">100</span>, figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">2</span>))</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    ks <span class="op">=</span> np.arange(<span class="dv">2</span>, <span class="bu">len</span>(inertias)<span class="op">+</span><span class="dv">2</span>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    ax[<span class="dv">0</span>].plot(ks, inertias, <span class="st">'-o'</span>, label<span class="op">=</span><span class="st">'SSE'</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    ax[<span class="dv">1</span>].plot(ks, chs, <span class="st">'-ro'</span>, label<span class="op">=</span><span class="st">'CH'</span>)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    ax[<span class="dv">0</span>].set_xlabel(<span class="st">'$k$'</span>)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    ax[<span class="dv">1</span>].set_xlabel(<span class="st">'$k$'</span>)</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    ax[<span class="dv">0</span>].set_title(<span class="st">'SSE'</span>)</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    ax[<span class="dv">1</span>].set_title(<span class="st">'CH'</span>)</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    ax[<span class="dv">2</span>].plot(ks, iidrs, <span class="st">'-go'</span>, label<span class="op">=</span><span class="st">'Inter-intra'</span>)</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    ax[<span class="dv">3</span>].plot(ks, scs, <span class="st">'-ko'</span>, label<span class="op">=</span><span class="st">'Silhouette coefficient'</span>)</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    ax[<span class="dv">2</span>].set_xlabel(<span class="st">'$k$'</span>)</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    ax[<span class="dv">2</span>].set_title(<span class="st">'Inter-intra'</span>)</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>    ax[<span class="dv">3</span>].set_xlabel(<span class="st">'$k$'</span>)</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    ax[<span class="dv">3</span>].set_title(<span class="st">'Silhouette coefficient'</span>)</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ax</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Let’s plot the interal validation values</p>
<pre><code>plot_internal(kmeans_dict1['inertias'], kmeans_dict1['chs'], 
    kmeans_dict1['iidrs'], kmeans_dict1['scs']);</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="image-outputs/3-internal-validation.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">FIGURE 3: Plots of the various internal validation measures for <span class="math inline">\(k=2\)</span> to <span class="math inline">\(k=20\)</span>. <span class="math inline">\(k=10\)</span> and <span class="math inline">\(k=16\)</span> were chosen because of the low intercluster-intracluster ration and the high silhouette coefficients for those values.</figcaption><p></p>
</figure>
</div>
<h4 class="anchored">
<ol start="2" type="1">
<li><code>k = 10</code>
</li></ol></h4>

<div class="cell" data-execution_count="11">
<details>
<summary>Code of setting k-means k=10</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>n1 <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>kmeans1 <span class="op">=</span> KMeans(n_clusters<span class="op">=</span>n1, random_state<span class="op">=</span><span class="dv">1704</span>, n_init<span class="op">=</span><span class="dv">20</span>, max_iter<span class="op">=</span><span class="dv">1000</span>, tol<span class="op">=</span><span class="fl">1e-6</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>y_predict_kmeans1 <span class="op">=</span> kmeans1.fit_predict(bow_tsvd1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><span class="math inline">\(k\)</span>-means clustering was performed on the Reddit sample titles using 10 clusters. The resulting clusters and the cluster size distribution are shown below. The clusters are relatives balanced in terms of cluster size, with the exception of one cluster (cluster 5) which contains more than 2500 Reddit titles.</p>
<div class="cell" data-execution_count="12">
<details>
<summary>Creating the plot and clusters</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>,<span class="dv">2</span>, dpi <span class="op">=</span> <span class="dv">100</span>, figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">3</span>))</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].scatter(bow_tsne1[:,<span class="dv">0</span>], bow_tsne1[:,<span class="dv">1</span>], c<span class="op">=</span>y_predict_kmeans1, alpha<span class="op">=</span><span class="fl">0.5</span>, label<span class="op">=</span><span class="va">True</span>, marker<span class="op">=</span><span class="st">'o'</span>, s<span class="op">=</span><span class="dv">8</span>)<span class="op">;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> Counter(y_predict_kmeans1)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>labels, values <span class="op">=</span> <span class="bu">zip</span>(<span class="op">*</span>counts.items())</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>indSort <span class="op">=</span> np.argsort(values)[::]</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> np.array(labels)[indSort]</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>values <span class="op">=</span> np.array(values)[indSort]</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>indexes <span class="op">=</span> np.arange(<span class="bu">len</span>(labels))</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>bar_width <span class="op">=</span> <span class="fl">0.35</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].barh(indexes, values, color<span class="op">=</span><span class="st">'#ff4500'</span>)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_xlabel(<span class="st">'Cluster size'</span>)</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_ylabel(<span class="st">'Cluster labels'</span>)</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_yticks(indexes <span class="op">+</span> bar_width)<span class="op">;</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_yticklabels(labels)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="image-outputs/4-clusters10.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">FIGURE 4: Resulting clustering for <span class="math inline">\(n=10\)</span>, and the cluster size distribution per cluster. The clusters are relatives balanced in terms of cluster size, with the exception of one cluster (cluster 5) which contains more than 2500 Reddit titles.</figcaption><p></p>
</figure>
</div>
<p>To understand the theme or category of each cluster, the <strong>top words</strong> or the most frequent words for each cluster was obtained. Shown below are the top 10 most occurring words per cluster, and the corresponding wordclouds.</p>
<div class="cell" data-execution_count="13">
<details>
<summary>Code to see the top 10 most occuring words per cluster</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>features <span class="op">=</span> tfidf_vectorizer.get_feature_names()</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>weights <span class="op">=</span> np.dot(kmeans1.cluster_centers_, tsvd1.components_)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>weights <span class="op">=</span> np.<span class="bu">abs</span>(weights)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">2</span>,<span class="dv">5</span>, dpi<span class="op">=</span><span class="dv">100</span>, figsize<span class="op">=</span>(<span class="dv">16</span>,<span class="dv">5</span>))</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>plt.subplots_adjust(wspace<span class="op">=</span><span class="fl">1.1</span>, hspace<span class="op">=</span><span class="fl">.8</span>)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(kmeans1.n_clusters):</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    indices <span class="op">=</span> np.argsort(weights[i])[<span class="op">-</span><span class="dv">10</span>:][::]</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    top_words <span class="op">=</span> [features[index] <span class="cf">for</span> index <span class="kw">in</span> indices]</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    values <span class="op">=</span> weights[i,indices]</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    indices <span class="op">=</span> np.arange(<span class="bu">len</span>(top_words))</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    bar_width <span class="op">=</span> <span class="fl">0.35</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    ax[i<span class="op">//</span><span class="dv">5</span>][i<span class="op">%</span><span class="dv">5</span>].barh(indices, values, color<span class="op">=</span><span class="st">'#ff4500'</span>)</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    ax[i<span class="op">//</span><span class="dv">5</span>][i<span class="op">%</span><span class="dv">5</span>].set_xlabel(<span class="st">'Weight'</span>)</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    ax[i<span class="op">//</span><span class="dv">5</span>][i<span class="op">%</span><span class="dv">5</span>].set_ylabel(<span class="st">'Top words'</span>)</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    ax[i<span class="op">//</span><span class="dv">5</span>][i<span class="op">%</span><span class="dv">5</span>].set_yticks(indexes <span class="op">+</span> bar_width)<span class="op">;</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>    ax[i<span class="op">//</span><span class="dv">5</span>][i<span class="op">%</span><span class="dv">5</span>].set_yticklabels(top_words)<span class="op">;</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>    ax[i<span class="op">//</span><span class="dv">5</span>][i<span class="op">%</span><span class="dv">5</span>].set_title(<span class="st">'Cluster '</span><span class="op">+</span> <span class="bu">str</span>(i<span class="op">+</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="column-page">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="image-outputs/5-topwords.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">FIGURE 5: Top 10 most occuring words per cluster (<span class="math inline">\(k=10\)</span>)</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell" data-execution_count="14">
<details>
<summary>Code of placing a Reddit mask wordcloud</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>mask <span class="op">=</span> np.array(Image.<span class="bu">open</span>(<span class="st">'Icon-Reddit1.png'</span>))</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>topic <span class="op">=</span> [<span class="st">'TIL'</span>, <span class="st">'Apartment/Rent'</span>, <span class="st">'New Year'</span>, <span class="st">'Iowa Caucus'</span>, <span class="st">'Food'</span>, <span class="st">'Technology'</span>, <span class="st">'Donald Trump'</span>, <span class="st">'Bernie Sanders'</span>, <span class="st">'Advise-seeking'</span>, <span class="st">'Hillary Clinton'</span>]</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">2</span>,<span class="dv">5</span>,dpi<span class="op">=</span><span class="dv">100</span>, figsize<span class="op">=</span>(<span class="dv">16</span>,<span class="dv">4</span>))</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>plt.subplots_adjust(wspace<span class="op">=</span><span class="fl">.2</span>, hspace<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ctr <span class="kw">in</span> <span class="bu">range</span>(kmeans1.n_clusters):</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    indices <span class="op">=</span> [i <span class="cf">for</span> i, x <span class="kw">in</span> <span class="bu">enumerate</span>(y_predict_kmeans1) <span class="cf">if</span> x <span class="op">==</span> ctr]</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    wordcloud <span class="op">=</span> WordCloud(background_color<span class="op">=</span><span class="st">"white"</span>, max_words<span class="op">=</span><span class="dv">100</span>, min_font_size<span class="op">=</span><span class="dv">8</span>, mask<span class="op">=</span>mask, </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>                          prefer_horizontal<span class="op">=</span><span class="fl">0.7</span>, colormap<span class="op">=</span><span class="st">'copper'</span>).generate(<span class="st">' '</span>.join([docs[index] <span class="cf">for</span> index <span class="kw">in</span> indices]))</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    ax[ctr<span class="op">//</span><span class="dv">5</span>][ctr<span class="op">%</span><span class="dv">5</span>].imshow(wordcloud, interpolation<span class="op">=</span><span class="st">'bilinear'</span>)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    ax[ctr<span class="op">//</span><span class="dv">5</span>][ctr<span class="op">%</span><span class="dv">5</span>].axis(<span class="st">'off'</span>)<span class="op">;</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    ax[ctr<span class="op">//</span><span class="dv">5</span>][ctr<span class="op">%</span><span class="dv">5</span>].set_title(topic[ctr])<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="column-page">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="image-outputs/6-wordclouds.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">FIGURE 6: Wordcloud per cluster (<span class="math inline">\(k=10\)</span>)</figcaption><p></p>
</figure>
</div>
</div>
<p>Using <span class="math inline">\(k = 10\)</span>, the general categories listed below were revealed. Sample Reddit titles for each category are also shown.</p>
<p>The clustering results show that <strong>Reddit is a very American-centric platform</strong>. Four of the ten topics are related to the 2016 U.S. Presidential Election, specifically on the Republican nominee Donald Trump, Democrat candidates Hillary Clinton and Bernie Sanders, and the Iowa caucuses, a biennial electoral event that marks the first major contest of the United States presidential primary season.</p>
<p>Also, two of the topics are related to “advise”. This reveals that apart from discussing politics, Reddit users go to Reddit to ask help or seek advise from other Redditors, whethere it be technology-related or legal.</p>
<p>Cluster topics:</p>
<h5 class="anchored">
TIL (Today I Learned)
</h5>
<pre><code>[   'til maternal kisses are not effective in alleviating minor childhood '
    'injuries (boo-boos): a randomized, controlled and blinded study.',
    'til goldman sachs did a study in 2009 that estimated a unified korea '
    'could boast an economy larger than france, germany, and even japan by '
    '2050 with a gdp of $6 trillion.',
    "til the justice league's martian manhunter was once addicted to cookies "
    'and hulked out when deprived of them.']</code></pre>
<h5 class="anchored">
Apartment/rent-related topics
</h5>
<pre><code>[   'business telephone service',
    'illegal towing from apartment complex md.',
    'can a landlord place a security camera in a communal space']</code></pre>
<h5 class="anchored">
“Happy new year”
</h5>
<pre><code>[   'new poll shows how far hillary has fallen with democrats',
    'new zealand - new tenants wanting to take over internet account, isp is '
    'refusing.',
    'watch "best of maskedman - 2015 new year special." on youtube',
    'happy new year reddit! :) i quit retirement, spent $250k in savings and '
    '51 months (15,000 hours) to develop the new internet, owned by the '
    'people, powered by humanity - the first company in history equally owned '
    'by everybody alive! we are uniting the whole world into one!',
    'til new yorkers at nye time square wear diapers and pads for lack of '
    'porta potties']</code></pre>
<h5 class="anchored">
“Iowa caucuses”
</h5>
<pre><code>[   'the gop’s condemnation of ‘sanctuary cities’ is surprisingly awkward in '
    'iowa',
    "jesse watters questions sanders' young supporters in iowa",
    '2016 iowa democratic caucus locations - get out there and caucus!!']</code></pre>
<h5 class="anchored">
Food
</h5>
<pre><code>[   'i have access to tons and tons of green onion tops,what can i make?',
    'mexican chopped salad',
    's&amp;amp;m restaurant in beijing caters to millennial’s basic instincts by '
    'serving food &amp;amp; sex']</code></pre>
<h5 class="anchored">
Donald Trump
</h5>
<pre><code>[   "donald trump says he'll attract democrats; polls say that's unlikely",
    'inside the clintons’ plan to defeat donald trump',
    'hecklers disrupt trump rally, photographer shoved to the ground']</code></pre>
<h5 class="anchored">
Bernie Sanders
</h5>
<pre><code>[   '“it appears that mr. trump is getting nervous that working families are '
    'catching on that his policies represent the interests of the billionaire '
    'class against almost everyone else." - bernie sanders',
    'killer mike: bernie sanders is the only candidate for black voters',
    'bernie sanders: the most fascist candidate of all.']</code></pre>
<h5 class="anchored">
Food
</h5>
<pre><code>[   'i have access to tons and tons of green onion tops,what can i make?',
    'mexican chopped salad',
    's&amp;amp;m restaurant in beijing caters to millennial’s basic instincts by '
    'serving food &amp;amp; sex']</code></pre>
<h5 class="anchored">
Advise-seeking
</h5>
<pre><code>[   'need an advice on gaming laptop',
    'charged with dui 2 years and 4 months after i was involved in a single '
    'car accident.',
    "i'd like to buy the rights of a post on reddit to recreate in another "
    'medium. how do i create a legal contract for this between strangers '
    'online?',
    'significant online food ordering trend',
    'md - need advice evicting a suicidal/alcoholic tenant/roommate.']</code></pre>
<h5 class="anchored">
Hillary Clinton
</h5>
<pre><code>[   'semi automatic ropp capping machine / ropp cap sealing machine',
    'state: hundreds of old clinton emails newly classified',
    'georgia poll: clinton 70, sanders 23']</code></pre>
<h4 class="anchored">
<ol start="3" type="1">
<li><code>k = 16</code>
</li></ol></h4>

<p>Let’s try with a <code>k=16</code></p>
<div class="cell" data-execution_count="15">
<details>
<summary>Setting k-means to k=16</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>n2 <span class="op">=</span> <span class="dv">16</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>kmeans2 <span class="op">=</span> KMeans(n_clusters<span class="op">=</span>n2, random_state<span class="op">=</span><span class="dv">1704</span>)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>y_predict_kmeans2 <span class="op">=</span> kmeans2.fit_predict(bow_tsvd1)</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>,<span class="dv">2</span>, dpi <span class="op">=</span> <span class="dv">100</span>, figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">3</span>))</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].scatter(bow_tsne1[:,<span class="dv">0</span>], bow_tsne1[:,<span class="dv">1</span>], c<span class="op">=</span>y_predict_kmeans2, alpha<span class="op">=</span><span class="fl">0.5</span>, label<span class="op">=</span><span class="va">True</span>, marker<span class="op">=</span><span class="st">'o'</span>, s<span class="op">=</span><span class="dv">8</span>)<span class="op">;</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> Counter(y_predict_kmeans2)</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>labels, values <span class="op">=</span> <span class="bu">zip</span>(<span class="op">*</span>counts.items())</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>indSort <span class="op">=</span> np.argsort(values)[::]</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> np.array(labels)[indSort]</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>values <span class="op">=</span> np.array(values)[indSort]</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>indexes <span class="op">=</span> np.arange(<span class="bu">len</span>(labels))</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>bar_width <span class="op">=</span> <span class="fl">0.35</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].barh(indexes, values, color<span class="op">=</span><span class="st">'#ff4500'</span>)</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_xlabel(<span class="st">'Cluster size'</span>)</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_ylabel(<span class="st">'Cluster label'</span>)</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_yticks(indexes <span class="op">+</span> bar_width)<span class="op">;</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_yticklabels(labels)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="image-outputs/7-k16.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">FIGURE 7. Clustering and Cluster size distribution for <span class="math inline">\(k=16\)</span>)</figcaption><p></p>
</figure>
</div>
<p>To understand the theme or category of each cluster, the <strong>top words</strong> or the most frequent words for each cluster was obtained. Shown below are the top 10 most occurring words per cluster, and the corresponding wordclouds.</p>
<div class="cell" data-execution_count="16">
<details>
<summary>Code to see the top words per 16 clusters</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>features <span class="op">=</span> tfidf_vectorizer.get_feature_names()</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>weights <span class="op">=</span> np.dot(kmeans2.cluster_centers_, tsvd1.components_)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>weights <span class="op">=</span> np.<span class="bu">abs</span>(weights)</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">4</span>,<span class="dv">4</span>, dpi<span class="op">=</span><span class="dv">100</span>, figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">10</span>))</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>plt.subplots_adjust(wspace<span class="op">=</span><span class="fl">1.1</span>, hspace<span class="op">=</span><span class="fl">.8</span>)</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(kmeans2.n_clusters):</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    indices <span class="op">=</span> np.argsort(weights[i])[<span class="op">-</span><span class="dv">10</span>:][::]</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    top_words <span class="op">=</span> [features[index] <span class="cf">for</span> index <span class="kw">in</span> indices]</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    values <span class="op">=</span> weights[i,indices]</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>    indices <span class="op">=</span> np.arange(<span class="bu">len</span>(top_words))</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    bar_width <span class="op">=</span> <span class="fl">0.35</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    ax[i<span class="op">//</span><span class="dv">4</span>][i<span class="op">%</span><span class="dv">4</span>].barh(top_words, values, color<span class="op">=</span><span class="st">'#ff4500'</span>)</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>    ax[i<span class="op">//</span><span class="dv">4</span>][i<span class="op">%</span><span class="dv">4</span>].set_xlabel(<span class="st">'Weight'</span>)</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>    ax[i<span class="op">//</span><span class="dv">4</span>][i<span class="op">%</span><span class="dv">4</span>].set_ylabel(<span class="st">'Top words'</span>)</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a><span class="co">#    ax[i//4][i%4].set_yticks(indexes + bar_width);</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>    ax[i<span class="op">//</span><span class="dv">4</span>][i<span class="op">%</span><span class="dv">4</span>].set_yticklabels(top_words)<span class="op">;</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>    ax[i<span class="op">//</span><span class="dv">4</span>][i<span class="op">%</span><span class="dv">4</span>].set_title(<span class="st">'Cluster '</span><span class="op">+</span> <span class="bu">str</span>(i<span class="op">+</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="column-page">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="image-outputs/8-k16-words.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">FIGURE 8. Top 10 most frequest words per cluster (<span class="math inline">\(k=16\)</span>)</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell" data-execution_count="17">
<details>
<summary>Code of placing a Reddit mask wordcloud for k=16</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>topics1 <span class="op">=</span> [<span class="st">'Tech support'</span>, <span class="st">'Clinton'</span>, <span class="st">'Trump'</span>, <span class="st">'Cluster 4'</span>, <span class="st">'Recipes'</span>, <span class="st">'TIL'</span>, <span class="st">'Aparment/Rent'</span>, <span class="st">'Technology'</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>           , <span class="st">'Sanders'</span>, <span class="st">'Food'</span>, <span class="st">'Cluster 11'</span>, <span class="st">'Car-related queries'</span>, <span class="st">'New Year'</span>, <span class="st">'Reaction Compilation'</span>, <span class="st">'Legal concerns'</span>, <span class="st">'Cluster 15'</span>]</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">4</span>,<span class="dv">4</span>,dpi<span class="op">=</span><span class="dv">100</span>, figsize<span class="op">=</span>(<span class="dv">16</span>,<span class="dv">12</span>))</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>plt.subplots_adjust(wspace<span class="op">=</span><span class="fl">0.2</span>, hspace<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ctr <span class="kw">in</span> <span class="bu">range</span>(kmeans2.n_clusters):</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    indices <span class="op">=</span> [i <span class="cf">for</span> i, x <span class="kw">in</span> <span class="bu">enumerate</span>(y_predict_kmeans2) <span class="cf">if</span> x <span class="op">==</span> ctr]</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    wordcloud <span class="op">=</span> WordCloud(background_color<span class="op">=</span><span class="st">"white"</span>, max_words<span class="op">=</span><span class="dv">100</span>, min_font_size<span class="op">=</span><span class="dv">8</span>, mask<span class="op">=</span>mask, </span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>                          prefer_horizontal<span class="op">=</span><span class="fl">0.6</span>, colormap<span class="op">=</span><span class="st">'copper'</span>).generate(<span class="st">' '</span>.join([docs[index] <span class="cf">for</span> index <span class="kw">in</span> indices]))</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    ax[ctr<span class="op">//</span><span class="dv">4</span>][ctr<span class="op">%</span><span class="dv">4</span>].imshow(wordcloud, interpolation<span class="op">=</span><span class="st">'bilinear'</span>)</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    ax[ctr<span class="op">//</span><span class="dv">4</span>][ctr<span class="op">%</span><span class="dv">4</span>].axis(<span class="st">'off'</span>)<span class="op">;</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>    ax[ctr<span class="op">//</span><span class="dv">4</span>][ctr<span class="op">%</span><span class="dv">4</span>].set_title(topics1[ctr])<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="column-page">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="image-outputs/9-k16-wordclouds.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">FIGURE 9. Wordcloud per cluster (<span class="math inline">\(k=16\)</span>)</figcaption><p></p>
</figure>
</div>
</div>
<p>As the number of clusters was increased, the more specific themes emerge. The following themes emerged:</p>
<h5 class="anchored">
Technical Support
</h5>
<pre><code>[   'smoothly solution for the canon printer 1-877-776-4348',
    'follow these step and escan antivirus easily',
    'norton antivirus technical support phone number',
    'itech logik | uk microsoft help desk phone number',
    'til tupak shakur became the first artist to have an album at number one '
    'on the billboard 200 while serving a prison sentence.']</code></pre>
<h5 class="anchored">
Hillary Clinton Emails
</h5>
<pre><code>[   'semi automatic ropp capping machine / ropp cap sealing machine',
    'state: hundreds of old clinton emails newly classified',
    'georgia poll: clinton 70, sanders 23',
    'nsa whistleblower: clinton email server was ‘open to being hacked by '
    'anybody in the world’',
    "hillary clinton's new hampshire boosters out in full force"]</code></pre>
<h5 class="anchored">
Donald Trump
</h5>
<pre><code>[   "donald trump says he'll attract democrats; polls say that's unlikely",
    'inside the clintons’ plan to defeat donald trump',
    'hecklers disrupt trump rally, photographer shoved to the ground',
    'a photographer covering a donald trump rally in virginia said a secret '
    'service agent choked him and slammed him to the ground monday as he tried '
    'to leave a media pen at the event where a protest erupted.',
    'til that donald trump sold steaks at the sharper image']</code></pre>
<h5 class="anchored">
Recipes
</h5>
<pre><code>[   'i have access to tons and tons of green onion tops,what can i make?',
    'mexican chopped salad',
    'dublin, ireland has gone mad for spice bags from takeaways, i tried my '
    'hand at my own. potato, shredded chicken, peppers and onions, cooked in '
    'garlic, chillies and spices. apologies for photo quality!',
    'tips for starting a healthy lifestyle!',
    "arroz carreteiro - brazilian wagoners' rice gourmetcentric"]</code></pre>
<h5 class="anchored">
TIL (Today I learned) topics
</h5>
<pre><code>[   'til maternal kisses are not effective in alleviating minor childhood '
    'injuries (boo-boos): a randomized, controlled and blinded study.',
    'til goldman sachs did a study in 2009 that estimated a unified korea '
    'could boast an economy larger than france, germany, and even japan by '
    '2050 with a gdp of $6 trillion.',
    "til the justice league's martian manhunter was once addicted to cookies "
    'and hulked out when deprived of them.',
    'til that the top 25 hedge fund managers in the us earn more than all us '
    'kindergarten teachers (and pay a smaller tax rate)',
    'til leonard howell ("the first rasta") preached that ras tafari, the '
    'emperor of ethiopia in 1933, was the messiah, that black people were the '
    'chosen of god and that they would soon be restored to their native '
    'country of ethiopia.']</code></pre>
<h5 class="anchored">
Apartment and Rent Concerns
</h5>
<pre><code>[   'my dad died yesterday and my mom is now being evicted because she is not '
    'on the lease, what can she do?',
    'landlord charged my girlfriend a damage fee of $5,000 for a broken door',
    'is refusing to take a breathalyzer test an admission of guilt?',
    'does an apartment with living/housing code violations against the city '
    'equal a nullified lease?',
    'had verbal agreement with room mate for payment of back monies to be '
    'paid, to be formalized in writing, questions, etc.']</code></pre>
<h5 class="anchored">
Bernie Sanders
</h5>
<pre><code>[   '“it appears that mr. trump is getting nervous that working families are '
    'catching on that his policies represent the interests of the billionaire '
    'class against almost everyone else." - bernie sanders',
    'killer mike: bernie sanders is the only candidate for black voters',
    'hillary clinton has already forgotten about bernie sanders | vice | '
    'united states',
    'bernie sanders ‘revolution’ threatens hillary clinton in iowa.',
    "jesse watters questions sanders' young supporters in iowa"]</code></pre>
<h5 class="anchored">
Food
</h5>
<pre><code>[   'semi automatic ropp capping machine / ropp cap sealing machine',
    'state: hundreds of old clinton emails newly classified',
    'georgia poll: clinton 70, sanders 23']</code></pre>
<h5 class="anchored">
Bernie Sanders
</h5>
<pre><code>[   '“it appears that mr. trump is getting nervous that working families are '
    'catching on that his policies represent the interests of the billionaire '
    'class against almost everyone else." - bernie sanders',
    'killer mike: bernie sanders is the only candidate for black voters',
    'bernie sanders: the most fascist candidate of all.']</code></pre>
<h5 class="anchored">
Food
</h5>
<pre><code>[   'significant online food ordering trend',
    's&amp;amp;m restaurant in beijing caters to millennial’s basic instincts by '
    'serving food &amp;amp; sex',
    'food near me – jasper arkansas',
    'as i am very polish and grew up eating a lot of good food, i decided to '
    'cook it for myself tonight.',
    'food in thailand - november 2015']</code></pre>
<h5 class="anchored">
Car-related topics
</h5>
<pre><code>[   'charged with dui 2 years and 4 months after i was involved in a single '
    'car accident.',
    "[md] car impounded after repair order wasn't received in september, "
    'options?',
    'tesla unveils the model 3, its lowest-priced car',
    'lincolnshire county council hit by £1m malware demand',
    'florida adverse possession law question and others regarding married but '
    'separate couples.']</code></pre>
<h5 class="anchored">
“Happy new year” reddits
</h5>
<pre><code>[   'watch "best of maskedman - 2015 new year special." on youtube',
    'happy new year reddit! :) i quit retirement, spent $250k in savings and '
    '51 months (15,000 hours) to develop the new internet, owned by the '
    'people, powered by humanity - the first company in history equally owned '
    'by everybody alive! we are uniting the whole world into one!',
    'mobile game of the year 2015: horizon chase',
    'til that j. r. r. tolkien hand wrote and illustrated letters to his '
    'children from father christmas every year for 20 years.',
    '[bellingham, wa] wife looking at buying property in bella coola, bc; '
    'legal implications of living half the year here in bellingham and half '
    'the year in bella coola']</code></pre>
<h5 class="anchored">
Vines reaction compilation
</h5>
<pre><code>[   'happy 2016 and may all your games be mostly bug free',
    'eight issues that could shape politics in 2016',
    '2016 iowa democratic caucus locations - get out there and caucus!!',
    '♥ dragonsden vines 🔒 - february 1, 2016 🔱 dragonsden reaction compilation '
    '🎨',
    'ark: surival evolved rings in 2016 with giant, rideable kangaroos']</code></pre>
<h5 class="anchored">
Legal concerns
</h5>
<pre><code>[   '(california) is it a crime when a religious figure/ lecturer has '
    'relations with one of his followers',
    'being accused of public indecency, among other things. this is a '
    'misunderstanding because i had health issues. [kansas, usa]',
    "[philadelphia, pa] i'm concerned that something suspicious is going on at "
    "my neighbor's house. i'd like to know if there's enough probable cause "
    'for the police to investigate.',
    "refugee's treated worse than dogs!",
    'i have a great idea for a trpg.']</code></pre>
<h2 class="anchored">
Conclusions and Recommendations
</h2>
<p>The clustering results show that <strong>Reddit is a very American-centric platform</strong>. Majority of the topics are related to the 2016 U.S. Presidential Election, specifically on the Republican nominee Donald Trump, Democrat candidates Hillary Clinton, and the Iowa caucuses.</p>
<p>Also, the results show that the two primary motivations of users to post in Reddit is (a) to discuss politics, and (b) to seek advise/ask help from other Redditors, whether technological, legal, or culinary in nature.</p>
<p>Increasing the number of clusters also reveal more specific topics such as ‘technical support’ and ‘’Vines reaction compilation videos’.</p>
<p>For future studies, it is suggested to perform hierarchical clustering.</p>
<h2 class="anchored">
References
</h2>
<i>
<ul>
<li>
<a href="https://www.techspot.com/news/91081-reddit-bans-subreddit-accused-spreading-covid-19-disinformation.html">Thumbnail Image</a>
</li><li>
<a href="https://towardsdatascience.com/all-the-news-17fa34b52b9d">All the news</a>
</li><li>
<a href="https://scikit-learn.org/stable/auto_examples/text/plot_document_clustering.html#sphx-glr-auto-examples-text-plot-document-clustering-py">Clustering text documents using k-means</a>
</li><li>
<a href="http://www.scholarpedia.org/article/Latent_semantic_analysis">Latent Semantic Analysis</a>
</li></ul>
</i><p><i></i></p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>